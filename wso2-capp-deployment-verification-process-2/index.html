    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="">
		<meta name="description" content="">
		<meta name="generator" content="Hugo 0.14" />
		<title>WSO2 CApp Deployment Verification Process &middot; imesh.io</title>
		<link rel="shortcut icon" href="http://localhost:1313/images/favicon.ico">
		<link rel="stylesheet" href="http://localhost:1313/css/style.css">
		<link rel="stylesheet" href="http://localhost:1313/css/highlight.css">
		<link href="http://localhost:1313/index.xml" rel="alternate" type="application/rss+xml" title="imesh.io" />
	</head>
    <body>
       <nav class="main-nav">
	
	
		<a href='http://localhost:1313/'> <span class="arrow">←</span>Home</a>
	

	
		<a href='http://localhost:1313/about'>About</a>
	

	
</nav>

        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>WSO2 CApp Deployment Verification Process</h1>
                    <h2 class="headline">September 16, 2013</h2>
                </header>
                <section id="post-body">
                    <p>WSO2 introduced a new Carbon Application (CApp) deployment verification process in Carbon 4.2.0 release. This might be useful for environments where applicaiton deployment process is automated via DevOps such as Jenkins.</p>

<p>In Carbon 4.2.0 release CApps are considered as atomic units which consists of a collection of artifacts that provides set of services for a specific requirement. Since the applications are considered atomic, if one of the artifacts of an application does not get deployed properly, that application will considered as not deployed. Which means either the all the artifacts of a CApp will get deployed or none.</p>

<p>Following steps could be tried out to test this functionality with WSO2 Application Server (AS) 5.2.0:</p>

<ol>
<li>Download AS 5.2.0 binary distribution and extract to a desired location.</li>
<li>Set the following property to false in repository/conf/carbon.xml
[code] <hideadminservicewsdls>false</hideadminservicewsdls> [/code]</li>
</ol>

<p>This will expose the Administrative Services WSDLs and we may need to access the following services:
[code]
1. <a href="https://host-name:9443/services/AuthenticationAdmin?wsdl">https://host-name:9443/services/AuthenticationAdmin?wsdl</a>
2. <a href="https://host-name:9443/services/ApplicationAdmin?wsdl">https://host-name:9443/services/ApplicationAdmin?wsdl</a>
[/code]</p>

<ol>
<li><p>Invoke the login() method at <a href="https://host-name:9443/services/AuthenticationAdmin">https://host-name:9443/services/AuthenticationAdmin</a> service. This method will return a Session ID on the HTTP response header and it may look like below:
JSESSIONID=45A850DF90CA6A009AD875CF5EF61460</p></li>

<li><p>Invoke listAllApplications() method at <a href="https://host-name:9443/services/ApplicationAdmin">https://host-name:9443/services/ApplicationAdmin</a> service while passing the Session ID on the HTTP request header as an Cookie. This request may look like below:</p></li>
</ol>

<p>[code]
– Request –
POST <a href="https://host-name:9443/services/ApplicationAdmin.ApplicationAdminHttpsSoap11Endpoint/">https://host-name:9443/services/ApplicationAdmin.ApplicationAdminHttpsSoap11Endpoint/</a> HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: “urn:listAllApplications”
COOKIE: JSESSIONID=45A850DF90CA6A009AD875CF5EF61460
Content-Length: 238
Host: host-name:9443
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)</p>

<p>– Response –
<soapenv:Envelope xmlns:soapenv=”http://schemas.xmlsoap.org/soap/envelope/”>
   <a href="soapenv:Body">soapenv:Body</a>
      <ns:listAllApplicationsResponse 
          xmlns:ns=”http://mgt.application.carbon.wso2.org” 
          xmlns:ax27=”http://mgt.application.carbon.wso2.org/xsd”>
         <a href="ns:return">ns:return</a>HelloCar_1.0.0<a href="/ns:return">/ns:return</a>
      <a href="/ns:listAllApplicationsResponse">/ns:listAllApplicationsResponse</a>
   <a href="/soapenv:Body">/soapenv:Body</a>
<a href="/soapenv:Envelope">/soapenv:Envelope</a>
[/code]</p>

<p>On the response body you could see the available CApps listed.</p>

<ol>
<li>Now invoke getAppData() method at <a href="https://host-name:9443/services/ApplicationAdmin">https://host-name:9443/services/ApplicationAdmin</a> service with the required CApp name and Session ID:</li>
</ol>

<p>[code]
– Request –
POST <a href="https://host-name:9443/services/ApplicationAdmin.ApplicationAdminHttpsSoap11Endpoint/">https://host-name:9443/services/ApplicationAdmin.ApplicationAdminHttpsSoap11Endpoint/</a> HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: text/xml;charset=UTF-8
SOAPAction: “urn:getAppData”
COOKIE: JSESSIONID=45A850DF90CA6A009AD875CF5EF61460
Content-Length: 329
Host: host-name:9443
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.1.1 (java 1.5)</p>

<p>– Response –
<soapenv:Envelope xmlns:soapenv=”http://schemas.xmlsoap.org/soap/envelope/”>
   <a href="soapenv:Body">soapenv:Body</a>
      <ns:getAppDataResponse xmlns:ns=”http://mgt.application.carbon.wso2.org”>
         <ns:return xsi:type=”ax27:ApplicationMetadata” 
                    xmlns:ax27=”http://mgt.application.carbon.wso2.org/xsd” 
                    xmlns:xsi=”http://www.w3.org/2001/XMLSchema-instance”>
            <a href="ax27:appName">ax27:appName</a>HelloCar<a href="/ax27:appName">/ax27:appName</a>
            <a href="ax27:appVersion">ax27:appVersion</a>1.0.0<a href="/ax27:appVersion">/ax27:appVersion</a>
            <ax27:artifactsDeploymentStatus xsi:type=”ax27:ArtifactDeploymentStatus”>
               <a href="ax27:artifactName">ax27:artifactName</a>HelloCarService<a href="/ax27:artifactName">/ax27:artifactName</a>
               <a href="ax27:deploymentStatus">ax27:deploymentStatus</a>Deployed<a href="/ax27:deploymentStatus">/ax27:deploymentStatus</a>
            <a href="/ax27:artifactsDeploymentStatus">/ax27:artifactsDeploymentStatus</a>
         <a href="/ns:return">/ns:return</a>
      <a href="/ns:getAppDataResponse">/ns:getAppDataResponse</a>
   <a href="/soapenv:Body">/soapenv:Body</a>
<a href="/soapenv:Envelope">/soapenv:Envelope</a>
[/code]</p>

<p>Here on the response body you could see the deployment status of the CApps and their artifacts.</p>

                </section>
            </article>
            <footer id="post-meta" class="clearfix">
                
                        <img class="avatar" src="http://localhost:1313/images/avatar.png">
                        <div>
                            <span class="dark"></span>
                            <span></span>
                        </div>
                    
                <section id="sharing">
                    <a class="twitter" href="https://twitter.com/intent/tweet?text=http%3a%2f%2flocalhost%3a1313%2fwso2-capp-deployment-verification-process-2%2f - WSO2%20CApp%20Deployment%20Verification%20Process "><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

                </section>
            </footer>

            

            <ul id="post-list" class="archive readmore">
    <h3>Read more</h3>
    
    
        
   
    
        
        <li>
            <a href="http://localhost:1313/an-introduction-to-wso2-configurator/">An Introduction to WSO2 Configurator<aside class="dates">Oct 13</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/introduction-to-apache-stratos-mock-iaas/">Introduction to Apache Stratos Mock IaaS<aside class="dates">Dec 22</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/installing-a-reverse-proxy-server-on-ubuntu-with-apache2/">Installing A Reverse Proxy Server on Ubuntu with Apache2<aside class="dates">Dec 15</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/how-to-activatedeactivate-message-processors-in-wso2-esb-with-mbeans/">How to Activate/Deactivate Message Processors in WSO2 ESB with MBeans<aside class="dates">Nov 27</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/providing-high-availability-for-stratos-with-pacemaker-heartbeat/">Providing High Availability for Stratos with Pacemaker &amp; Heartbeat<aside class="dates">Oct 24</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/re-writing-query-parameters-in-wso2-esb/">Re-Writing Query Parameters in WSO2 ESB<aside class="dates">Aug 27</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/install-stratos-in-one-go/">Install Stratos in One Go<aside class="dates">Jun 22</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/implementing-split-aggregate-pattern-in-esb/">Implementing Split Aggregate Pattern in ESB<aside class="dates">Jun 15</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="http://localhost:1313/exposing-wso2-identity-server-admin-services-as-rest-apis/">Exposing WSO2 Identity Server Admin Services as REST APIs<aside class="dates">May 15</aside></a>
        </li>
        
   
</ul>
            <footer id="footer">
    <p class="small">
        © Copyright 2015 
    </p>
</footer>
        </section>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://localhost:1313/js/main.js"></script>
<script src="http://localhost:1313/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


    </body>
</html>
